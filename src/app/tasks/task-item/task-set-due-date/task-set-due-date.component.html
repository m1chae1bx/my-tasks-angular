<div class="action-item flex" (click)="openMenu($event)">
  <mat-icon 
    class="action-icon flex items-center" 
    aria-hidden="true"
    [ngClass]="{
      'accent-color': task.dueDate
    }"
  >calendar_today</mat-icon>
  <span #menuTrigger [matMenuTriggerFor]="menu"></span>
  <div 
    class="action-typo flex items-center margin-left-large flex-auto justify-space-between" 
    [ngClass]="{
      'accent-color': task.dueDate
    }"
  >
    <span *ngIf="!task.dueDate; else dueDateVal">
      Set Due Date
    </span>
    <ng-template #dueDateVal>
      <span>
        <ng-container *ngIf="isToday; else tomorrow">Today</ng-container>
        <ng-template #tomorrow>
          <ng-container *ngIf="isTomorrow else displayDate">Tomorrow</ng-container>
        </ng-template>
        <ng-template #displayDate>
          {{ isCurrentYear ? (task.dueDate | date:'MMM d') : (task.dueDate | date) }} 
          <span *ngIf="isOverdue && !task.completed" class="warn-color"> - Overdue</span>
        </ng-template>
      </span>
    </ng-template>
    
  </div>
</div>
<mat-menu #menu="matMenu" yPosition="above">
  <ng-template matMenuContent>
      <button mat-menu-item (click)="picker.open()">Custom Date</button>
      <button mat-menu-item (click)="setDueDate(4)">Next Week</button>
      <button mat-menu-item (click)="setDueDate(3)">In 2 Days</button>
      <button mat-menu-item (click)="setDueDate(2)">Tomorrow</button>
      <button mat-menu-item (click)="setDueDate(1)">Today</button>
  </ng-template>
</mat-menu>
<input 
    matInput 
    [matDatepicker]="picker"
    [(ngModel)]="task.dueDate"
    #dateInput
    [hidden]="true"
    (dateChange)="onChangeDate()"
>
<mat-datepicker touchUi #picker></mat-datepicker>